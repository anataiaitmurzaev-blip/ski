{"ast":null,"code":"import _defineProperty from\"C:/my-site/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/my-site/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/my-site/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/my-site/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/my-site/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{Form,Button}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var API_URL='http://localhost:5000';var UpdateForm=function UpdateForm(_ref){var recordId=_ref.recordId,onCancel=_ref.onCancel;var _useState=useState({title:'',description:'',duration:'',activity:'',dates:[],price:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];useEffect(function(){// Загрузка данных записи при монтировании компонента\nfetchRecordData();},[]);var fetchRecordData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,recordData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(API_URL,\"/api/my_tour/\").concat(recordId));case 3:response=_context.sent;recordData=response.data;setFormData({title:recordData.title,description:recordData.description,duration:recordData.duration,activity:recordData.activity,date:recordData.date,price:recordData.price});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log('Ошибка загрузки данных записи',_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchRecordData(){return _ref2.apply(this,arguments);};}();var handleInputChange=function handleInputChange(event){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},event.target.name,event.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.prev=1;_context2.next=4;return axios.put(\"\".concat(API_URL,\"/api/my_tour/\").concat(recordId),formData);case 4:alert('Запись успешно обновлена');onCancel();_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log('Ошибка обновления записи',_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[1,8]]);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"update-form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,className:\"update-form\",children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"title\",value:formData.title,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"description\",value:formData.description,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0414\\u043B\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"duration\",value:formData.duration,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0412\\u0438\\u0434 \\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u043E\\u0441\\u0442\\u0438:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"activity\",value:formData.activity,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0414\\u0430\\u0442\\u0430:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"date\",name:\"date\",value:formData.date,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0426\\u0435\\u043D\\u0430:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"price\",value:formData.price,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"btn btn-primary\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:onCancel,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]})]});};export default UpdateForm;","map":{"version":3,"names":["React","useState","useEffect","axios","Form","Button","jsx","_jsx","jsxs","_jsxs","API_URL","UpdateForm","_ref","recordId","onCancel","_useState","title","description","duration","activity","dates","price","_useState2","_slicedToArray","formData","setFormData","fetchRecordData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","recordData","wrap","_callee$","_context","prev","next","get","concat","sent","data","date","t0","console","log","stop","apply","arguments","handleInputChange","event","_objectSpread","_defineProperty","target","name","value","handleSubmit","_ref3","_callee2","_callee2$","_context2","preventDefault","put","alert","_x","className","children","onSubmit","Group","Label","Control","type","onChange","required","variant","onClick"],"sources":["C:/my-site/src/components/CRUD/UpdateForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Form, Button } from 'react-bootstrap';\r\n\r\nconst API_URL = 'http://localhost:5000';\r\n\r\nconst UpdateForm = ({ recordId, onCancel }) => {\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    duration: '',\r\n    activity: '',\r\n    dates: [],\r\n    price: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Загрузка данных записи при монтировании компонента\r\n    fetchRecordData();\r\n  }, []);\r\n\r\n  const fetchRecordData = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_URL}/api/my_tour/${recordId}`);\r\n      const recordData = response.data;\r\n      setFormData({\r\n        title: recordData.title,\r\n        description: recordData.description,\r\n        duration: recordData.duration,\r\n        activity: recordData.activity,\r\n        date: recordData.date,\r\n        price: recordData.price,\r\n      });\r\n    } catch (error) {\r\n      console.log('Ошибка загрузки данных записи', error);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (event) => {\r\n    setFormData({\r\n      ...formData,\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    try {\r\n      await axios.put(`${API_URL}/api/my_tour/${recordId}`, formData);\r\n\r\n      alert('Запись успешно обновлена');\r\n      onCancel();\r\n    } catch (error) {\r\n      console.log('Ошибка обновления записи', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"update-form-container\">\r\n      <h2>Изменить запись</h2>\r\n      <Form onSubmit={handleSubmit} className=\"update-form\">\r\n        <Form.Group>\r\n          <Form.Label>Название:</Form.Label>\r\n          <Form.Control type=\"text\" name=\"title\" value={formData.title} onChange={handleInputChange} required />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Описание:</Form.Label>\r\n          <Form.Control type=\"text\" name=\"description\" value={formData.description} onChange={handleInputChange} required />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Длительность:</Form.Label>\r\n          <Form.Control type=\"text\" name=\"duration\" value={formData.duration} onChange={handleInputChange} required />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Вид активности:</Form.Label>\r\n          <Form.Control type=\"text\" name=\"activity\" value={formData.activity} onChange={handleInputChange} required />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Дата:</Form.Label>\r\n          <Form.Control type=\"date\" name=\"date\" value={formData.date} onChange={handleInputChange} required />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Цена:</Form.Label>\r\n          <Form.Control type=\"text\" name=\"price\" value={formData.price} onChange={handleInputChange} required />\r\n        </Form.Group>\r\n        <Button type=\"submit\" className=\"btn btn-primary\">Сохранить</Button>\r\n        <Button variant=\"secondary\" onClick={onCancel}>Отмена</Button>\r\n        </Form>\r\n        </div>\r\n        );\r\n        };\r\n        export default UpdateForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}